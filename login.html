<!DOCTYPE html>
<html lang="ko">
<head>
  <title>메타포레스트</title>

	<meta charset="utf-8">
	<!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="description" content="">
	
	<!-- Google Fonts -->
	<link href="https://cdn.rawgit.com/moonspam/NanumSquare/master/nanumsquare.css" rel="stylesheet">
	<link href='//fonts.googleapis.com/css?family=DM+Sans:400,400i,500,700' rel='stylesheet'>

	<!-- Favicons -->
	<link rel="shortcut icon" href="./img/favicon.ico">

	<!-- Css -->
	<link rel="stylesheet" href="css/login.css" />
    <link rel="stylesheet" href="css/custom.css" />
</head>

<body class="single-project" itemscope itemtype="http://schema.org/WebPage">
    <main>

	    <!-- header -->
	    <div id="header">
	        <h2 id="logo"><a href="" target="_blank" title=""><img src="img/logo/logo_bk.png"></a>
	        </h2>
	    </div>

	<div class="loginContainer">
	    <!-- <div class="logoBox">
            <img class="logoImage1" src="" alt="" />
        </div> -->

	        <div class="loginBox">
	            <h3 class="headline1">메타포레스트 로그인을 합니다!</h3>
							<p class="desc_txt">메타포레스트로 편리하게<br>다양한 심리상담을 받아보세요!</p>
	            <div class="contentBox">
	                <div class="contentWrap">
	                    <div class="mb-4 id_wrap">
	                        <label htmlFor="formEmailInput" class="form-label"></label>
	                        <input onChange="" type="text" class="form-control form-control-lg" id="formEmailInput" placeholder="아이디" />
	                    </div>
	                    <div class="mb-4 psw_wrap">
	                        <label htmlFor="formPasswordInput2" class="form-label"></label>
	                        <input onChange="" type="password" class="form-control form-control-lg" id="formPasswordInput2" placeholder="비밀번호" />
	                    </div>
                        <div class="keep_check" id="keep_check">
                            <input type="checkbox">
                            <label for="keep_login" id="keep_login">로그인 상태 유지</label>                            
                        </div>
	                    <div onClick="onSubmitForm()" class="d-grid gap-2">
	                        <button class="btn btn-primary btn-lg" type="button">로그인</button>
	                    </div>
	                </div>
	            </div>

	            <div class="find_wrap">
	                <ul class="">
	                    <li><a href="./password.html">비밀번호 찾기</a></li>
	                    <li><a href="./account.html">아이디 찾기</a></li>
	                    <li><a href="./signup.html"> 회원가입</a></li>
	                </ul>
	            </div>
	        </div>
	</main> <!-- end main wrapper -->

	<!-- Footer -->
	<footer class="footer">
		<div class="footer-container">

		<div class="footer-top">
			<div class="footer-left">
			<div class="logo">
				<img class="logo" src="img/logo/log03.png" alt="logo">
			</div>
			</div>
			<div class="footer-right">
			</div>
		</div>

		<div class="footer-middle">
			<div class="btn-download">
			<img src="img/button/btn-download.png" alt="download">
			</div>
		</div>

		<div class="footer-bottom">
			<div>
			<div class="footer-info">
				<ul>
				<li>주식회사 야타브엔터 (<a href="http://www.yatavent.com" target="_blank">www.yatavent.com</a>)</li>
				<li>주소 | 서울특별시 성동구 뚝섬로17가길 48</li>
				<li>Mail | yatavent@yatavent.com</li>
				<li>Tel | 02-2039-00633</li>
				<li>사업자등록번호 | 750-88-01121</li>
				</ul>
			</div>

			<div class="footer-copyright">
				<span class="copyright">
				Copyright &copy; <a href="http://www.yatavent.com" target="_blank">YATAVENT</a>
				Corp. All rights reserved.
				</span>
			</div>
			</div>
			
			<div class="footer-socials">
			<div>
				<a href="https://www.instagram.com/metaforest.official/?hl=ko" target="_blank" class="social-instagram"
				aria-label="instagram" title="instagram" target="_blank">
				<i class="fa fa-instagram" aria-hidden="true"></i>
				</a>
			</div>
			<div>
				<a href="https://www.instagram.com/metaforest.official/?hl=ko" class="social social-blog" target="_blank"
				aria-label="blog" title="blog" target="_blank">
				<i class="fa fa-blog"></i>
				</a>
			</div>
			<div>
				<a href="https://www.facebook.com/profile.php?id=100075394868765" target="_blank" class=" social-facebook"
				aria-label="facebook" title="facebook" target="_blank">
				<i class="fa fa-facebook" aria-hidden="true"></i>
				</a>
			</div>
			</div>
			
		</div>

		</div> <!-- end container -->
	</footer> <!-- end footer -->


    <script src='./tools/cfg.js'></script>
    <script src='./tools/enums.js'></script>
    <script src='./tools/libs.js'></script>
    <script src='./tools/md5.js'></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script>
        'use strict'
        async function onSubmitForm() {
            let email = document.getElementById("formEmailInput").value
            let passwd = document.getElementById("formPasswordInput2").value

            if (email === "" && passwd === "") {
                alert("email === '' && passwd === ''")
                return
            }

            const hexMd5 = hex_md5(email + hex_md5(passwd))
            let apiRequest = {
                email: email,
                password: hexMd5
            }

            const _response = await axios.post(apiUrl+'auth/login', apiRequest, {withCredentials: true})

            let response = {}
            Object.assign(response, _response)

            console.log(response)
            console.log(response.data)

			storageSet('accessLevel', response.data.accessLevel.toString())

            // if (response.errCode !== eErrCode.NONE) {
            //     alert(response.message) 
            //     return
            // }
            // window.location.href = "https://metaforest.us/board_main.html?value="+_value;
            window.location.href = "http://127.0.0.1:5500/board_main.html"
        }
    </script>

		<script>
			
			//로그인 상태 유지 버튼 색상 변경
			const keepLogin = document.getElementById('keep_login');
			const keepCheck = document.getElementById('keep_check')
			function clicker(){
				keepCheck.classList.toggle('on');
			}
			keepLogin.addEventListener("click", clicker)

		</script>
	
</body>
</html>