<!DOCTYPE html>
<html lang="ko">
<head>
  <title>메타포레스트</title>

	<meta charset="utf-8">
	<!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="description" content="">
	
	<!-- Google Fonts -->
	<link href="https://cdn.rawgit.com/moonspam/NanumSquare/master/nanumsquare.css" rel="stylesheet">
	<link href='//fonts.googleapis.com/css?family=DM+Sans:400,400i,500,700' rel='stylesheet'>

	<!-- Css -->
	<link rel="stylesheet" href="css/login.css" />
    <!-- <link rel="stylesheet" href="css/style.css" /> -->
</head>

<body class="single-project" itemscope itemtype="http://schema.org/WebPage">
    <main>

	    <!-- header -->
	    <div id="header">
	        <h2 id="logo"><a href="" target="_blank" title=""><img src="img/logo/logo_bk.png"></a>
	        </h2>
	    </div>

	<div class="loginContainer">
	    <!-- <div class="logoBox">
            <img class="logoImage1" src="" alt="" />
        </div> -->

	        <div class="loginBox">
	            <h3 class="headline1">메타포레스트 로그인을 합니다!</h3>
							<p class="desc_txt">메타포레스트로 편리하게<br>다양한 심리상담을 받아보세요!</p>
	            <div class="contentBox">
	                <div class="contentWrap">
	                    <div class="mb-4 id_wrap">
	                        <label htmlFor="formEmailInput" class="form-label"></label>
	                        <input onChange="" type="text" class="form-control form-control-lg" id="formEmailInput" placeholder="아이디" />
	                    </div>
	                    <div class="mb-4 psw_wrap">
	                        <label htmlFor="formPasswordInput2" class="form-label"></label>
	                        <input onChange="" type="password" class="form-control form-control-lg" id="formPasswordInput2" placeholder="비밀번호" />
	                    </div>
                        <div class="keep_check" id="keep_check">
                            <input type="checkbox">
                            <label for="keep_login" id="keep_login">로그인 상태 유지</label>                            
                        </div>
	                    <div onClick="onSubmitForm()" class="d-grid gap-2">
	                        <button class="btn btn-primary btn-lg" type="button">로그인</button>
	                    </div>
	                </div>
	            </div>

	            <div class="find_wrap">
	                <ul class="">
	                    <li><a href="./password.html">비밀번호 찾기</a></li>
	                    <li><a href="./account.html">아이디 찾기</a></li>
	                    <li><a href="./signup.html"> 회원가입</a></li>
	                </ul>
	            </div>
	        </div>
	</main> <!-- end main wrapper -->
    <script src='./tools/cfg.js'></script>
    <script src='./tools/enums.js'></script>
    <script src='./tools/libs.js'></script>
    <script src='./tools/md5.js'></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script>
        'use strict'
        async function onSubmitForm() {
            let email = document.getElementById("formEmailInput").value
            let passwd = document.getElementById("formPasswordInput2").value

            if (email === "" && passwd === "") {
                alert("email === '' && passwd === ''")
                return
            }

            const hexMd5 = hex_md5(email + hex_md5(passwd))
            let apiRequest = {
                email: email,
                password: hexMd5
            }

            const _response = await axios.post('http://127.0.0.1:7071/auth/login', apiRequest, {withCredentials: true})

            let response = {}
            Object.assign(response, _response)

            console.log(response)
            console.log(response.data)

            // if (response.errCode !== eErrCode.NONE) {
            //     alert(response.message) 
            //     return
            // }
            // window.location.href = "https://metaforest.us/board_main.html?value="+_value;
            window.location.href = "http://127.0.0.1:5500/board_main.html"
        }
    </script>

		<script>
			
			//로그인 상태 유지 버튼 색상 변경
			const keepLogin = document.getElementById('keep_login');
			const keepCheck = document.getElementById('keep_check')
			function clicker(){
				keepCheck.classList.toggle('on');
			}
			keepLogin.addEventListener("click", clicker)

		</script>
	
</body>
</html>